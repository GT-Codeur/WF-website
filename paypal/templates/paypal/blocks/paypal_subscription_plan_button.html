<p>{{ value.paypal_plan_id }}</p>

<div id="paypal-button-container-{{ value.paypal_plan_id }}"></div>

<script>
    // define a function to display PayPal subscription buttons
    function displayPaypalSubscriptionButtons() {
        console.log("display paypal subscription buttons");

        // render PayPal subscription buttons
        paypal.Buttons({
            createSubscription: function(data, actions) {
                return actions.subscription.create({
                    'plan_id': '{{ value.paypal_plan_id }}'
                });
            },
            onApprove: function(data, actions) {
                // alert the user that subscription was created
                alert('Subscription created!');
            },
            // handle error
            onError(err) {
                alert("Error!");
                console.log(err); 
            }
        }).render('#paypal-button-container-{{ value.paypal_plan_id }}');
    }


    window.onload = function() {
        displayPaypalSubscriptionButtons();
    };
</script>



